
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="A layout example that shows off a responsive product landing page.">

  <title>Landing Page &ndash; Layout Examples &ndash; Pure</title>




  <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.5.0/pure-min.css">



  <!--[if lte IE 8]>

  <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.5.0/grids-responsive-old-ie-min.css">

  <![endif]-->
  <!--[if gt IE 8]><!-->

  <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.5.0/grids-responsive-min.css">

  <!--<![endif]-->



  <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">




  <!--[if lte IE 8]>
  <link rel="stylesheet" href="http://purecss.io/combo/1.17.30?/css/layouts/marketing-old-ie.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="http://purecss.io/combo/1.17.30?/css/layouts/marketing.css">
  <!--<![endif]-->




  <!--[if lt IE 9]>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.js"></script>
  <![endif]-->

  <style>
    body {
      padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
    }

    .sr-container {
      position:relative;
      width:100%;
      height:100%;
    }

    .cell {
      height: 150px;
      float: left;
      margin: 0;
      padding: 5px;
      position: relative;
      border: 1px solid #ececec;
      display:none;
    }



    .cell.pageLoadTime,
    .cell.perceivedLoadTime,
    .cell.pageProcessTime,
    .cell.loadEventTime,
    .cell.connectTime,
    .cell.domContentTime,
    .cell.responseTime,
    .cell.redirectTime,
    .cell.domainLookupTime,
    .cell.domperfDOMContentLoaded,
    .cell.domperfLoad {
      display:block;
    }

    .cell .header {
      font-size: 1.6em;
      margin: 0 0 18px 0;
      opacity: 0;
    }

    .cell .desc {
      font-size: .7em;
      opacity: 0;
    }

    .cell .value {
      position: absolute;
      bottom: 25px;
      right: 0;
      left: 1%;
      font-size: 1em;
      text-align: right;
    }

    .cell.cell3 .header,
    .cell.cell3 .desc {
      opacity: 1;
    }


    .cell.cell0,
    .cell.cell1,
    .cell.cell2,
    .cell.cell3,
    .cell.cell4{
      opacity: .5;
      font-size: 2em;
    }

    .cell.cell3 {
      /*font-size: 3em*/
    }

    input#url {
      color: white;
      border: 3px solid white;
      padding: .5em;
      font-weight: 100;
      border-radius: 5px;
      line-height: 1em;
      font-size: 3em;
      width:79%;
      background-color: transparent;
      float:left;
    }

    input#reportbutton{
      float: left;
      width: 20%;
      height: 127px;
    }

    fieldset {
      border: 0
    }
  </style>


</head>
<body>









<div class="header">
  <div class="home-menu pure-menu pure-menu-open pure-menu-horizontal pure-menu-fixed">
    <a class="pure-menu-heading" href="">Speedgun</a>

    <ul>
      <li class="pure-menu-selected"><a href="#">Home</a></li>
      <li><a href="#">Tour</a></li>
      <li><a href="#">Sign Up</a></li>
    </ul>
  </div>
</div>

<div class="splash-container">
  <div class="splash">


    <form name="reportform" id="reportform" class="pure-form">
      <fieldset>
        <input type="text" name="url" id="url" placeholder="http://www.whatever.com" required autofocus/>
        <input type="submit" name="Report" id="reportbutton" value="Report!" class="pure-button">
        <label for="cachedCheckbox" class="pure-checkbox" style="width:50%"><input type="checkbox" name="cachedCheckbox" id="cachedCheckbox" value="true">Cached? </label>
        <input type="text" name="email" id="email" placeholder="you@email.com" />

      </fieldset>
    </form>

    <p class="splash-subhead">
      Lorem ipsum dolor sit amet, consectetur adipisicing elit.
    </p>

  </div>
</div>

<div class="content-wrapper">


  <div id="report" class="pure-g">
    <div id="formProgress"></div>
    <div class="progress progress-striped active" style="display:none"><div class="bar" style="width: 10%;"></div></div>

  </div>

  <div class="content">
    <h2 class="content-head is-center">Excepteur sint occaecat cupidatat.</h2>

    <div class="pure-g">
      <div class="l-box pure-u-1 pure-u-md-1-2 pure-u-lg-1-4">

        <h3 class="content-subhead">
          <i class="fa fa-rocket"></i>
          Get Started Quickly
        </h3>
        <p>
          Phasellus eget enim eu lectus faucibus vestibulum. Suspendisse sodales pellentesque elementum.
        </p>
      </div>
      <div class="l-box pure-u-1 pure-u-md-1-2 pure-u-lg-1-4">
        <h3 class="content-subhead">
          <i class="fa fa-mobile"></i>
          Responsive Layouts
        </h3>
        <p>
          Phasellus eget enim eu lectus faucibus vestibulum. Suspendisse sodales pellentesque elementum.
        </p>
      </div>
      <div class="l-box pure-u-1 pure-u-md-1-2 pure-u-lg-1-4">
        <h3 class="content-subhead">
          <i class="fa fa-th-large"></i>
          Modular
        </h3>
        <p>
          Phasellus eget enim eu lectus faucibus vestibulum. Suspendisse sodales pellentesque elementum.
        </p>
      </div>
      <div class="l-box pure-u-1 pure-u-md-1-2 pure-u-lg-1-4">
        <h3 class="content-subhead">
          <i class="fa fa-check-square-o"></i>
          Plays Nice
        </h3>
        <p>
          Phasellus eget enim eu lectus faucibus vestibulum. Suspendisse sodales pellentesque elementum.
        </p>
      </div>
    </div>
  </div>

  <div class="ribbon l-box-lrg pure-g">
    <div class="l-box-lrg is-center pure-u-1 pure-u-md-1-2 pure-u-lg-2-5">
      <img class="pure-img-responsive" alt="File Icons" width="300" src="/img/common/file-icons.png">
    </div>
    <div class="pure-u-1 pure-u-md-1-2 pure-u-lg-3-5">

      <h2 class="content-head content-head-ribbon">Laboris nisi ut aliquip.</h2>

      <p>
        Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
        tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
        quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
        consequat. Duis aute irure dolor.
      </p>
    </div>
  </div>

  <div class="content">
    <h2 class="content-head is-center">Dolore magna aliqua. Uis aute irure.</h2>

    <div class="pure-g">
      <div class="l-box-lrg pure-u-1 pure-u-md-2-5">
        <form class="pure-form pure-form-stacked">
          <fieldset>

            <label for="name">Your Name</label>
            <input id="name" type="text" placeholder="Your Name">


            <label for="email">Your Email</label>
            <input id="email" type="email" placeholder="Your Email">

            <label for="password">Your Password</label>
            <input id="password" type="password" placeholder="Your Password">

            <button type="submit" class="pure-button">Sign Up</button>
          </fieldset>
        </form>
      </div>

      <div class="l-box-lrg pure-u-1 pure-u-md-3-5">
        <h4>Contact Us</h4>
        <p>
          Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
          tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
          quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
          consequat.
        </p>

        <h4>More Information</h4>
        <p>
          Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
          tempor incididunt ut labore et dolore magna aliqua.
        </p>
      </div>
    </div>

  </div>

  <div class="footer l-box is-center">
    View the source of this layout to learn more. Made with love by the YUI Team.
  </div>

</div>


<script>
  (function (root) {
// -- Data --
    root.YUI_config = {"version":"3.17.2","base":"http:\u002F\u002Fyui.yahooapis.com\u002F3.17.2\u002F","comboBase":"http:\u002F\u002Fyui.yahooapis.com\u002Fcombo?","comboSep":"&","root":"3.17.2\u002F","filter":"min","logLevel":"error","combine":true,"patches":[],"maxURLLength":2048,"groups":{"vendor":{"combine":true,"comboBase":"\u002Fcombo\u002F1.17.30?","base":"\u002F","root":"\u002F","modules":{"css-mediaquery":{"path":"vendor\u002Fcss-mediaquery.js"},"handlebars-runtime":{"path":"vendor\u002Fhandlebars.runtime.js"}}},"app":{"combine":true,"comboBase":"\u002Fcombo\u002F1.17.30?","base":"\u002Fjs\u002F","root":"\u002Fjs\u002F"}}};
    root.app || (root.app = {});
    root.app.yui = {"use":function () { return this._bootstrap('use', [].slice.call(arguments)); },"require":function () { this._bootstrap('require', [].slice.call(arguments)); },"ready":function (callback) { this.use(function () { callback(); }); },"_bootstrap":function bootstrap(method, args) { var self = this, d = document, head = d.getElementsByTagName('head')[0], ie = /MSIE/.test(navigator.userAgent), callback = [], config = typeof YUI_config != "undefined" ? YUI_config : {}; function flush() { var l = callback.length, i; if (!self.YUI && typeof YUI == "undefined") { throw new Error("YUI was not injected correctly!"); } self.YUI = self.YUI || YUI; for (i = 0; i < l; i++) { callback.shift()(); } } function decrementRequestPending() { self._pending--; if (self._pending <= 0) { setTimeout(flush, 0); } else { load(); } } function createScriptNode(src) { var node = d.createElement('script'); if (node.async) { node.async = false; } if (ie) { node.onreadystatechange = function () { if (/loaded|complete/.test(this.readyState)) { this.onreadystatechange = null; decrementRequestPending(); } }; } else { node.onload = node.onerror = decrementRequestPending; } node.setAttribute('src', src); return node; } function load() { if (!config.seed) { throw new Error('YUI_config.seed array is required.'); } var seed = config.seed, l = seed.length, i, node; if (!self._injected) { self._injected = true; self._pending = seed.length; } for (i = 0; i < l; i++) { node = createScriptNode(seed.shift()); head.appendChild(node); if (node.async !== false) { break; } } } callback.push(function () { var i; if (!self._Y) { self.YUI.Env.core.push.apply(self.YUI.Env.core, config.extendedCore || []); self._Y = self.YUI(); self.use = self._Y.use; if (config.patches && config.patches.length) { for (i = 0; i < config.patches.length; i += 1) { config.patches[i](self._Y, self._Y.Env._loader); } } } self._Y[method].apply(self._Y, args); }); self.YUI = self.YUI || (typeof YUI != "undefined" ? YUI : null); if (!self.YUI && !self._injected) { load(); } else if (self._pending <= 0) { setTimeout(flush, 0); } return this; }};
    root.YUI_config || (root.YUI_config = {});
    root.YUI_config.seed = ["http:\u002F\u002Fyui.yahooapis.com\u002Fcombo?3.17.2\u002Fyui\u002Fyui-min.js"];
    root.YUI_config.groups || (root.YUI_config.groups = {});
    root.YUI_config.groups.app || (root.YUI_config.groups.app = {});
    root.YUI_config.groups.app.modules = {"start\u002Fapp":{"path":"start\u002Fapp.js","requires":["handlebars-runtime","yui","base-build","router","pjax-base","view","start\u002Fmodels\u002Fgrid","start\u002Fviews\u002Finput","start\u002Fviews\u002Foutput","start\u002Fviews\u002Fdownload"]},"start\u002Fmodels\u002Fgrid":{"path":"start\u002Fmodels\u002Fgrid.js","requires":["yui","querystring","base-build","model","model-sync-rest","start\u002Fmodels\u002Fmq"]},"start\u002Fmodels\u002Fmq":{"path":"start\u002Fmodels\u002Fmq.js","requires":["css-mediaquery","attribute","base-build","model","model-list"]},"start\u002Fviews\u002Fdownload":{"path":"start\u002Fviews\u002Fdownload.js","requires":["yui","base-build","querystring","view"]},"start\u002Fviews\u002Finput":{"path":"start\u002Fviews\u002Finput.js","requires":["base-build","start\u002Fmodels\u002Fmq","start\u002Fviews\u002Ftab"]},"start\u002Fviews\u002Foutput":{"path":"start\u002Fviews\u002Foutput.js","requires":["base-build","escape","start\u002Fviews\u002Ftab"]},"start\u002Fviews\u002Ftab":{"path":"start\u002Fviews\u002Ftab.js","requires":["yui","base-build","view"]}};
  }(this));
</script>
<script>
  app.yui.use('node-base', 'node-event-delegate', function (Y) {
    // This just makes sure that the href="#" attached to the <a> elements
    // don't scroll you back up the page.
    Y.one('body').delegate('click', function (e) {
      e.preventDefault();
    }, 'a[href="#"]');
  });
</script>



<script src="bootstrap/js/jquery.js"></script>

<script src="speedgun.js"></script>

<script type="text/javascript">
  var $this = $('.bar');
  $("#formProgress").ajaxStart(function() {
    //$('#formInputs').fadeOut(200);
    $('#report .progress-striped').fadeIn(200);


  });

</script>
<script type="text/javascript" src="js/app.js"></script>
<script type="text/javascript">

$( document ).ready( function() {
  var emailInput = $("#email");
  var bartimer;
  //test Register an event listener on the sumbit action
  $('#reportform').submit(function(event) {
    event.preventDefault();
    var reportType = "cached";

    var reportData = $(this).serializeObject();

    if( reportData.reportbutton ) {
      delete reportData.reportbutton;
    }

    if(!reportData.cachedCheckbox){
      reportData.cachedCheckbox = false;
      reportType = "noncached";
    }

    if(reportData.url.indexOf('http://') === -1){
      reportData.url = 'http://' + reportData.url;
    }
//            console.log(reportData);

    disableForm();


    $.get("/rest/performance/go", { url: reportData.url, cached: reportData.cachedCheckbox, email: reportData.email},
        function(data){
          console.log('data',data);
          if(data === "#fail"){
            hideProgress();
            enableForm();
            alert('Bad URL or problem with my server');
          }else{
            var per = 10;
            bartimer = window.setInterval(function(){
              per += 1;
              $('#report .progress-striped .bar').attr('style','width:'+ per +'%');
            },2000);

            data = $.parseJSON(data);
//                    console.log('parsedjson',data);
            $('<h3>The report for '+reportData.url+' is <span style=\"color:blue\">#' + data.position + '</span> in line. It will show up ' + (!$.trim(emailInput.val()) ? 'in your inbox' : '') + ' when it\'s ready.</h3>').prependTo('#report').fadeOut(9000);
            if(!$.trim(emailInput.val())){
              var reportchecker = window.setInterval(function(){
//                        console.log('reportchecker');
                setupReport();
              },10000);
            }else{
              $('#report .progress-striped .bar').hide();
              enableForm();
            }


            function setupReport(){
              $.getJSON('\/rest\/performance\/report\?uuid\='+ data.uuid, function(json) {
                if(json === "#fail" || json.length === undefined || json.length < 5){
                }else{
                  clearInterval(bartimer);
                  clearInterval(reportchecker);
                  hideProgress();

                  emailInput.removeAttr("disabled");
                  $("#url").removeAttr("disabled");
                  $("#reportbutton").removeAttr("disabled");

                  $('#formProgress').html('<div class=\"progress progress-striped active\"><div class=\"bar\" style=\"width: 100%;\"></div></div>').fadeOut(200);
                  $('<h2>'+ reportData.url +'</h2><h3>' + reportType + '</h3>' +
                      '<a href=\"\/rest\/performance\/report\?uuid\='+ data.uuid +'\">JSON</a>').appendTo('#report');
                  buildReport(json);
                  gatherCells();
                }
              });
            }

          }

        });

  });

  function disableForm(){
    emailInput.attr("disabled", "disabled");
    $("#url").attr("disabled", "disabled");
    $("#reportbutton").attr("disabled", "disabled");
  }

  function enableForm(){
    emailInput.removeAttr("disabled");
    $("#url").removeAttr("disabled");
    $("#reportbutton").removeAttr("disabled");
  }

  function hideProgress(){
    $('#report .progress-striped .bar').fadeOut(200);
  }

  buildReport(speedgun);
  gatherCells();

  function gatherCells(){
    var cellMap = {},cellMap1 = {};
    cellMap.list = document.querySelectorAll('.cell.cell0');

    for(var i=1;i<5;i++){
      cellMap[i] = {};
      cellMap[i].list = document.querySelectorAll('.cell.cell' + i);

      for(cell in cellMap[i].list){
        var cellEle = document.getElementById(cellMap[i].list[cell].id);

        try {
//          if (cellMap.list[cell].offsetLeft != -1000 && cellMap.list[cell].offsetTop !== -1000){
          cellEle.style.position = 'absolute';

          cellEle.style.left = cellMap.list[cell].offsetLeft + 'px';
          cellEle.style.top = cellMap.list[cell].offsetTop + 'px';
          var cellValue = cellEle.querySelector('.value');
          if(i === 3){
            cellEle.style.opacity = 1;
            cellValue.style.fontSize = '3em';
          }

          cellValue.setAttribute("style","width:"+  (i * .20) * 100 + "%");
//            console.log(cellEle, cellMap.list[cell], cellMap.list[cell].offsetLeft,cellMap.list[cell].offsetTop);
//          }
        } catch (e) {
        }
      }

//      console.log(cellMap);
    }
  }

  function buildReport(reportjson){
    var rows = [], gotem = false;
    var $table = $('<div class=\"pure-g\"></div>');
    var errorIdx = 0;
    for(obj in reportjson){


      var thisreport = reportjson[obj], thisrow;

      //only want one run through of headers
      for(var key in thisreport)
      {
        if(thisreport.hasOwnProperty(key))
        {
          //console.log(key);
          if(key !== 'timeStamp' && key !== 'taskName' && key !== 'phantomCacheEnabled'){
            var htext = key.replace(/([A-Z])(?=[a-z])/g, " $1");
            var $cell = $('<div class=\"pure-u-1-2 cell ' + key + ' cell' + obj + '\" id=\"' + key + '_' + obj + '\"></div>');

            $cell.append('<div class=\"header\">' + (htext.charAt(0).toUpperCase() + htext.slice(1)) + '</div>');

            if(key === 'errors'){
              var rowWithErrors = $('<div></div>');
              $('<a>',{
                text: thisreport[key].value.length + ' JavaScript Errors',
                title: 'errors',
                click: function(){$('.js-error').toggle();}
              }).appendTo(rowWithErrors);

              for(error in thisreport[key]){
                rowWithErrors.append('<div id=\"js-errors' + errorIdx + '\" class=\"js-error\" style=\"display:none\">' + decodeURIComponent(thisreport[key][error]) + '</div><hr/>');
                errorIdx++;
              }
              thisrow = $cell.append(rowWithErrors);
            }else if(key.indexOf('resourceSingle') >= 0) {
              var resRow = $('<div></div>');
              $('<a>', {
                text: 'Show it',
                title: 'res',
                click: function () {
                  $('.res').toggle();
                }
              }).appendTo(resRow);
              resRow.append('<div class=\"res\" style=\"display:none\">' + thisreport[key].value.url + '</div>');
              thisrow = $cell.append(resRow);
            }else if(key.indexOf('navEvents') >= 0){
              var rowWithNavEvents = $('<div></div>');
              for(navEvent in thisreport[key].value){
                rowWithNavEvents.append('<div>'+ thisreport[key].value[navEvent].url +'<hr/></div>');
              }
              thisrow = $cell.append(rowWithNavEvents);
            }else if(key !== 'timeStamp' && key !== 'taskName' && key !== 'phantomCacheEnabled'){
              $cell.append('<div class=\"desc\">'+ thisreport[key].label +'</div>');
              thisrow = $cell.append('<div class=\"value\" onclick=\"alert(obj)\">'+ thisreport[key].value +'ms</div>');
            }
            $table.append(thisrow)
          }
        }
      }

    }

    $('#report').append($table);
  }




});

$.fn.serializeObject = function() {
  var o = {};
  var a = this.serializeArray();
  $.each(a, function() {
    if (o[this.name]) {
      if (!o[this.name].push) {
        o[this.name] = [o[this.name]];
      }
      o[this.name].push(this.value || '');
    } else {
      o[this.name] = this.value || '';
    }
  });
  return o;
};

</script>

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-1241000-11']);
  _gaq.push(['_setDomainName', 'wesleyhales.com']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>


</body>
</html>
